<!DOCTYPE html>
<html>
    <head>
        <title>@ViewBag.Title</title>
        <meta charset="utf-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <meta name="description" content="Smart Healthcare Systems">
        <meta name="author" content="trustedhealth.com">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
    
        <!-- Favicon -->
        <link rel="shortcut icon" href="#">

        <!-- Font -->
        <link rel="stylesheet" href="/styles/bootstrap.css">
        <link rel="stylesheet" href="/styles/animate.min.css">
        <link rel="stylesheet" href="/styles/owl.theme.css">
        <link rel="stylesheet" href="/styles/owl.carousel.css">
        <link rel="stylesheet" href="/styles/superslides.css">
        <link rel="stylesheet" href="/styles/cubeportfolio.min.css">
        <link rel="stylesheet" href="/styles/magnific-popup.css">
        <link rel="stylesheet" href="/styles/reset.css">
        <link href='http://fonts.googleapis.com/css?family=Montserrat:400,700' rel='stylesheet' type='text/css'>
        <link href='/styles/font-awesome.min.css' rel='stylesheet' type='text/css' />

        @Styles.Render("~/styles/css")
        @Scripts.Render("~/bundles/modernizr")
    </head>
    <body>
        
        @*Default MVC Header*@ 
        @*<div class="navbar navbar-inverse navbar-fixed-top">
            <div class="container">
                <div class="navbar-header">
                    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                        <span class="icon-bar"></span>
                    </button>
                    @Html.ActionLink("Application name", "Index", "Home", new { area = "" }, new { @class = "navbar-brand" })
                </div>
                <div class="navbar-collapse collapse">
                    <ul class="nav navbar-nav">
                        <li>@Html.ActionLink("Home", "Index", "Home")</li>
                        <li>@Html.ActionLink("About", "About", "Home")</li>
                        <li>@Html.ActionLink("Contact", "Contact", "Home")</li>
                    </ul>
                </div>
            </div>
        </div>*@
    
        <!--Menu-->
        <div class="menu">
            <nav class="navbar navbar-fixed-top navbar-custom navbar-page" role="navigation">
                <div class="container">
                    <!-- Brand and toggle get grouped for better mobile display -->
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#nav">
                            <span class="sr-only">Toggle Navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                    </div>
                
                    <!-- Collect the nav links, forms, and other content for toggling -->
                    <div class="collapse navbar-collapse" id="nav">
                        <ul class="nav navbar-nav uppercase">
                            <li class="links">@Html.ActionLink("Home", "Index", "Home", new { area = "" }, null)</li>
                            @*<li class="links"><a class="scroll" href="what.html">What we do?</a></li>*@
                            <li class="links">@Html.ActionLink("About", "About", "Home", new { area = "" }, null)</li>
                            <li class="links">@Html.ActionLink("Privacy", "Privacy", "Home", new { area = "" }, null)</li>
                            
                            

                            <li class="hidden-xs hidden-sm"><img src="/img/logo.jpg" alt="logo"></li>

                            @*<li class="links">@Html.ActionLink("Appointments", "Index", "Appointments", new { area = "Appointments" }, null)</li>*@
                            
                            <li class="links dropdown">
                                @Html.ActionLink("Appointments", "Index", "Appointments", new { area = "Appointments" }, null)
                                <ul class="dropdown-menu sub-menu">
                                    <li>@Html.ActionLink("Appointment Dashboard", "Index", "Appointments", new { area = "Appointments" }, null)</li>
                                    <li id="liAppointmentReport" style="display: none">@Html.ActionLink("Appointment Report", "Report", "Appointments", new { area = "Appointments" }, null)</li>
                                    <li id="liPatientManagement" style="display: none">@Html.ActionLink("Patient Management", "PatientManagement", "Account", new { area = "" }, null)</li>
                                    <li id="liUserManagement" style="display: none">@Html.ActionLink("System User Management", "UserManagement", "Account", new { area = "" }, null)</li>
                                </ul>
                            </li>
                            

                            @*<li class="links"><a class="scroll" href="team.html">Team</a></li>*@
                            
                            
                            
                            @*Laboratory Services*@
                            <li class="links dropdown" style="display: none">
                                @*@Html.ActionLink("Laboratory Services", "Index", "LabServices", new {data-toggle="dropdown", @class="dropdown-toggle"})*@
                                @Html.ActionLink("Lab Services", "Index", "LabServices", new { area = "Services" }, null)
                                @*<a href="#" data-toggle="dropdown" class="dropdown-toggle">@Html.ActionLink("Laboratory Services", "Index", "LabServices")</a>*@
                                @*<a href="#" data-toggle="dropdown" class="dropdown-toggle">Portfolio</a>*@
                                <ul class="dropdown-menu sub-menu">
                                    @*<li><a href="portfolio_v1.html">Portfolio v1</a></li>*@
                                    <li>@Html.ActionLink("Lab Service 1", "LabService1", "LabServices", new { area = "Services" }, null)</li>
                                    <li>@Html.ActionLink("Lab Service 2", "LabService2", "LabServices", new { area = "Services" }, null)</li>
                                </ul>
                            </li>

                            @*<li class="links">@Html.ActionLink("Client Services", "ClientServices", "Home")</li>*@  
                            <li class="links dropdown" style="display: none">
                                @Html.ActionLink("Client Services", "Index", "ClientServices", new { area = "Services" }, null)
                                <ul class="dropdown-menu sub-menu">
                                    @*<li><a href="portfolio_v1.html">Portfolio v1</a></li>*@
                                    <li>@Html.ActionLink("Book An Appointment", "BookAppoinment", "ClientServices", new { area = "Services" }, null)</li>
                                </ul>
                            </li>
                           
                            @*<li class="links">@Html.ActionLink("Login", "Index", "Account", new { area = ""}, new {id = "linkLogin"})</li>*@
                            <li class="links"><a href="/Account" id="linkLogin">Log In</a></li>
                            

                            @*<li class="links"><a class="scroll" href="blog.html">Blog</a></li>*@
                        </ul>
                    </div><!-- /.navbar-collapse -->
                </div><!-- /.container-fluid -->
            </nav>
        </div>
        <!--End Menu-->

        <div id="body-content">
            @*<button id="userSessionInfo">User Info</button>
            <button id="clearUserSession">Clear Session</button>*@
            @RenderBody()
        </div>
    
        <!--Footer-->
        <footer id="footers">
            <div class="container">
                <div class="row">
                    <div class="content col-lg-12">
                        <div class="col-lg-4">
                            <img src="/img/shs-footer-logo.jpg" class="img-responsive" alt="">
                            <h3>&copy; Smart Healthcare Systems</h3>
                        </div>
                        <div class="col-lg-6 hidden-xs hidden-sm">
                            <ul class="footer-menu">
                                <li><a href="/">Home</a></li>
                                @*<li><a href="">What We Do!</a></li>*@
                                <li><a href="/Home/About">About</a></li>
                                <li><a href="/Home/Privacy">Privacy</a></li>
                                <li><a href="/Appointments/Appointments">Appointments</a></li>
                                @*<li><a href="">Team</a></li>
                                <li><a href="">Portfolio</a></li>
                                <li><a href="">Blog</a></li>*@
                            </ul>
                        </div>
                        <div class="col-lg-2 hidden-xs hidden-sm">
                            <div class="social">
                                <a href=""><i class="fa fa-facebook"></i></a>
                                <a href=""><i class="fa fa-twitter"></i></a>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </footer>
        <!--End Footer-->
        
        
        @Scripts.Render("~/bundles/scripts")

        <script type="text/javascript" src="http://maps.google.com/maps/api/js?sensor=false"></script>
        @*@Scripts.Render("~/bundles/bootstrap")*@
        @RenderSection("scripts", required: false)
        
        <script>
            $(function () {
                if (userSession) {
                    userSession.loadUserSession();
                    setLoginState();
                }
            });

            $("#linkLogin").on('click', function (e) {
                setLoginState();

                if (userSession) {
                    if (userSession.isUserLoggedIn()) {
                        userSession.logout();
                        e.preventDefault();
                    }
                }
            });

            function setLoginState() {
                if (userSession) {
                    if (userSession.isUserLoggedIn()) {
                        $("#linkLogin").html('Log Out');
                        setAppointmentAccess();
                    } else {
                        $('#liAppointmentReport').hide();
                        $('#liUserManagement').hide();
                        $('#liPatientManagement').hide();

                        $("#linkLogin").html('Log In');
                    }

                    
                } else {
                    console.log('user session library not loaded');
                }
            }

            function setAppointmentAccess() {
                var currUser = userSession.getUserSession();
                var userTypeDesc = currUser.userType.description;

                //System Admin: everything, but mainly just to create faciility admin and doctor office admins

                //Facility Admin: can't view report
                //Facility Staff: can't view report, cannot view user management

                //Doctor Office Admin: can't view report
                //Doctor Office Staff: can't view user management
                $('#liPatientManagement').show();

                if (userTypeDesc == 'System Admin') {
                    $('#liAppointmentReport').show();
                    $('#liUserManagement').show();
                } 
                else if (userTypeDesc == 'Facility Admin') {
                    $('#liUserManagement').show();
                } 
                else if (userTypeDesc == 'Facility Staff') {
                }
                else if (userTypeDesc == 'Doctor Office Admin') {
                    $('#liUserManagement').show();
                }
                else if (userTypeDesc == 'Doctor Office Staff') {
                    $('#liAppointmentReport').show();
                }
            }

            //$("#userSessionInfo").on('click', function () {
            //    console.log(userSession.getUserSession());
            //    return false;
            //});

            //$('#clearUserSession').on('click', function () {
            //    sessionStorage.clear();
            //    window.location = window.location.origin;
            //    return false;
            //});

        </script>
    </body>
</html>
